# Ballot 用户故事

## 组织者

Alice希望发起一次线上的无记名投票。了解到ballot.b1f6c1c4.info的功能后，Alice通过浏览器访问http://ballot.b1f6c1c4.info ，浏览器自动跳转到https://ballot.b1f6c1c4.info/ ，迅速加载出了首页并自动识别本地环境。Alice手动将页面切换至中文。在首页上Alice了解到Ballot的基本功能与使用方法，点击了底部“发起投票”按钮。

浏览器跳转至注册页面，页面上清楚地说明了投票组织者的责任。Alice阅读后填写了用户名和密码，并点击“注册”按钮。

浏览器跳转至总控制台页面，页面上清楚地指示了发起新投票的入口。Alice迅速找到了“发起投票”按钮并点击。

浏览器跳转至发起投票页面，页面上清楚地说明了投票的流程。Alice阅读后填写了投票名称，勾选了“确认投票名称不能更改、投票不能删除”复选框，并点击“确认创建”按钮。

浏览器跳转至投票控制台中的投票编辑页面，页面上清楚地显示了投票的状态“准备中”，并且分屏显示了投票内容：左侧为字段列表，右侧为投票示例。Alice在左侧添加了一个新的文本字段，右侧立刻作出了响应，多出来了一个文本框。Alice删掉了左侧的一个字段，右侧对应的文本框立刻消失，右侧其他字段示例不受任何影响。Alice在左侧添加了诸多不同类型的字段并命名。

过了一会，投票的状态自动变成了“邀请中”，并提示Alice密钥已经就绪，可以邀请投票者。Alice点击该提示，系统自动保存了Alice对投票内容的更改，并跳转到投票控制台的投票者管理页面，页面上清楚地说明了邀请投票者的流程。Alice填写了一名投票者的姓名并点击添加投票者，看到了“投票者姓名无法更改”的提示，并点击“添加”。随后上方出现一名新的投票者信息，包括状态（目前为“需要邀请”）、姓名、备注、邀请码、操作（包括发送邀请和删除）。Alice这样添加了很多条投票者信息，然后点击下面的“批量导出邀请码”按钮，将姓名和邀请码导出成Excel文件，保存到本地。

Alice将该Excel文件打印出来，剪成小条，通过线下保密渠道分发给各位投票者。当一名投票者注册后，Alice在手机上的投票者管理页面实时刷新，显示该投票者已经注册，并更新其备注、状态（由“需要邀请”变为“已注册”）、操作（包括删除）。

Alice注意到全部投票者都注册以后，点击投票者管理页面下方的“确认投票者名单”按钮，仔细阅读了页面上相关的说明信息，并点击确认。浏览器跳转至投票控制台页面，页面上清楚显示了投票的状态“邀请完毕”，并分别概要地显示了投票内容和投票者信息，其中投票内容有一个“编辑”按钮和一个“确认投票内容”按钮，而投票者信息只有一个“查看”按钮。Alice注意到投票内容已经编辑完毕，于是点击“确认投票内容”按钮，仔细阅读了页面上相关的说明信息，并点击确认。

投票控制台页面上投票状态变成“预投票”。Alice阅读了页面上的说明，并通过其他渠道通知各投票者进行预投票。根据页面上的说明，Alice理解预投票的过程是严格在投票者本地进行的，投票者以外的任何人无法参与。

Alice在特定时间点（已提前告知各位投票者）点击投票控制台页面上的“启动正式投票”按钮，仔细阅读页面上的说明后，点击确认。投票状态变成“正式投票”，页面上原来显示投票内容的部分变成投票状态监视，实时显示已投票人数和各投票字段的投票统计。该部分有一个“导出数据”按钮。

Alice在特定时间点（已提前告知各位投票者）点击投票控制台页面上的“结束投票”按钮，仔细阅读页面上的说明后，点击确认。投票状态变成“已结束”。Alice点击“导出数据”按钮，选择导出Excel格式数据，将投票信息保存至本地。

## 投票者

Bob从线下保密渠道收到了来自Alice的邀请码。Bob通过浏览器访问http://ballot.b1f6c1c4.info ，浏览器自动跳转到https://ballot.b1f6c1c4.info/ ，迅速加载出了首页并自动识别本地环境。Bob手动将页面切换至中文。在首页上Bob了解到Ballot的基本功能与使用方法，点击了底部“参与投票”按钮。

浏览器跳转至投票者注册页面，页面上清楚说明了投票者的责任。Bob仔细阅读后输入了邀请码、姓名、备注，勾选了“以上信息一旦提交均无法修改”复选框，并点击确认注册。

浏览器跳转至注册成功页面，页面上明确警告Bob不要关闭该页面，并提示Bob必须可靠保存私钥，不得使用剪贴板。页面上有一个“显示”按钮，单击后下方出现Bob的私钥。Bob点击“保存到本地”按钮，将私钥保存到可靠位置。页面上还显示了预投票页面的链接，并提示必须等投票组织者开启预投票以后此链接才能生效。

Bob收到Alice的通知称预投票开始后，通过浏览器访问预投票页面。该页面上明确显示了投票名称和投票内容，并明确要求Bob在完全断网的情况下进行操作，并且不得使用剪贴板。Bob填写完各字段后，将私钥从本地上传浏览器，并点击“在本地进行签名”按钮。在下方出现已签名的投票内容，Bob点击“保存到本地”按钮，将已签名的投票内容保存到可靠位置。

Bob收到Alice的通知称正式投票开始后，通过浏览器访问正式投票页面。该页面明确警告不能使用普通浏览器进行投票，强制使用Tor浏览器或者torsocks命令行工具。Bob采用Tor浏览器访问正式投票页面。该页面上明确显示了隐私安全状态（IP、时区、Locale、Javascript状态等），任何一项不正确均会警告无法投票。Bob确认所有隐私安全状态均正常后，将已签名的投票内容粘贴至文本框内并点击提交。

Tor浏览器跳转至提交暂存页面，页面上明确提示已经收到投票，正在验证签名。Bob点击下方“查询”按钮，检查投票状态。Tor浏览器跳转至提交暂存页面或者提交成功页面。在确认提交成功后，Bob关闭了Tor浏览器。

Bob后来（在投票被Alice结束之前）改变了想法，决定更改投票。Bob访问预投票页面，重新填写各字段，粘贴私钥，执行签名，再利用Tor浏览器访问正式投票页面，提交已签名的投票，并检查投票状态为成功。

## 验证者

Victor希望检验投票的真实性。Victor从Alice处得到了投票的链接。Victor访问该链接，可以看到投票参数（状态为“已结束”）、投票内容、投票者、投票统计。

Victor首先验证每个投票是否来自于所谓投票者。Victor点击投票者的“导出数据”、投票统计的“导出数据”、投票参数的“导出数据”，根据数据得到了每个投票都来自于某一名投票者且没有任何一名投票者投过两票的结论。

Victor再验证每个所谓投票者是否是真实的，而非由Alice代为投票。Victor从线下渠道联系Bob，直接验证身份。
